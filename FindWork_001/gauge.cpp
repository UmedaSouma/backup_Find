//===========================================================================================================================================================
// 
// ゲージの処理 [gauge.cpp]
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "gauge.h"
#include "calculation.h"
#include "manager.h"

//========================================================================================================================
// コンストラクタ
//========================================================================================================================
CGauge::CGauge(int nPriority, int nOrigin) :CObject2D(nPriority, nOrigin),
m_fRatio(1.0f),
m_Max(0),
m_Current(0)
{
}

//========================================================================================================================
// デストラクタ
//========================================================================================================================
CGauge::~CGauge()
{
}

//========================================================================================================================
// 初期設定
//========================================================================================================================
HRESULT CGauge::Init()
{
	//int Idx = 0;
	//Idx = CManager::GetTexture()->Regist("data\\TEXTURE\\donut_002.png");
	//BindTexture(CManager::GetTexture()->GetAddress(Idx));

	CObject2D::Init();
	return S_OK;
}

//========================================================================================================================
// 終了処理
//========================================================================================================================
void CGauge::Uninit()
{
	CObject2D::Uninit();
}

//========================================================================================================================
// 更新処理
//========================================================================================================================
void CGauge::Update()
{
	m_fRatio = CCalculation::Ratio(m_Max, m_Current);
	SetHPratio(m_fRatio);

	//m_Current--;

	CObject2D::Update();

	//if (m_Current <= 0)
	//{
	//	Uninit();
	//}
}

//========================================================================================================================
// 描画処理
//========================================================================================================================
void CGauge::Draw()
{
	CObject2D::Draw();
}

//========================================================================================================================
// 生成処理
//========================================================================================================================
CGauge* CGauge::Create()
{
	CGauge* pGauge = new CGauge;

	pGauge->SetPos({ SCREEN_WIDTH * 0.045f, SCREEN_HEIGHT * 0.93f,0.0f, });
	pGauge->SetSize({ 600.0f,25.0f,0.0f });

	pGauge->m_Max = 5000;
	pGauge->m_Current = pGauge->m_Max;

	pGauge->Init();

	return pGauge;
}