//===========================================================================================================================================================
// 
// 車パラメーター編集 [editor_param.cpp]
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "editor_param.h"
#include "block3D.h"
#include "car_enemy.h"
#include "input.h"
#include "fade.h"
#include "manager.h"
#include "course.h"

CPlayerManager* CEditor_Param::pPlayerManager = nullptr;
//========================================================================================================================
// コンストラクタ
//========================================================================================================================
CEditor_Param::CEditor_Param()
{
}

//========================================================================================================================
// デストラクタ
//========================================================================================================================
CEditor_Param::~CEditor_Param()
{
}

//========================================================================================================================
// 初期設定
//========================================================================================================================
HRESULT CEditor_Param::Init()
{
	//for (int Vertical = 0; Vertical < 10; Vertical++)
	//{
	//	for (int Horizon = 0; Horizon < 100; Horizon++)
	//	{
	//		CBlock3D::Create({ 0.0f + (Vertical * 20.0f * 10.0f),-30.0f,0.0f + (Horizon * 20.0f * 10.0f) });
	//	}
	//}

	CCarEnemy::Create(CParamStorage::CAR_TRACK, { 0.0f,-20.0f,100.0f });
	CCourse::Create(CCourse::COURSE_01);

	// プレイヤー管理クラス作成
	pPlayerManager = new CPlayerManager;
	pPlayerManager->Init();

	return S_OK;
}

//========================================================================================================================
// 終了処理
//========================================================================================================================
void CEditor_Param::Uninit()
{
	if (pPlayerManager != nullptr)
	{
		// プレイヤー管理を削除
		pPlayerManager->Uninit();

		delete pPlayerManager;
		pPlayerManager = nullptr;
	}

	CScene::Uninit();
}

//========================================================================================================================
// 更新処理
//========================================================================================================================
void CEditor_Param::Update()
{
	pPlayerManager->Update();

	CInputKeyBoard* keyboard = CManager::GetKeyboard();
	CFade* pFade = CManager::GetFade();

	if (keyboard->GetTrigger(DIK_F2))
	{
		pFade->SetFade(CScene::MODE_COURSEPOINT);
	}
}

//========================================================================================================================
// 描画処理
//========================================================================================================================
void CEditor_Param::Draw()
{
}